# How to Make an Unattended Ubuntu ISO
> :calendar: *March 16, 2018*

Download an Ubuntu Server ISO: <https://www.ubuntu.com/download/server>

Mount the ISO and copy to working directory:

```bash
sudo mkdir -p /mnt/iso

sudo mount -o loop ~/Downloads/ubuntu-16.04.3-server-amd64.iso /mnt/iso

sudo mkdir -p /opt/iso

sudo cp -rT /mnt/iso /opt/iso
```

Set the boot screen to timeout in 0.1 seconds. Note that a time of "0" actually means infinite
timeout:

```bash
sudo sed -i 's/timeout 0/timeout 1/g' /opt/iso/isolinux/isolinux.cfg
```

Use the Ubuntu Server Minimal seed and add Kickstart file:

```bash
sudo sed -i 's/ubuntu-server.seed/ubuntu-server-minimal.seed ks=cdrom:\/ks.cfg/g' /opt/iso/isolinux/txt.cfg
```

Copy the Kickstart file to `/opt/iso/ks.cfg`:

```
# Generated by Kickstart Configurator
# platform=AMD64 or Intel EM64T

preseed user-setup/allow-password-weak boolean true
preseed partman-basicfilesystems/no_swap boolean false
preseed pkgsel/update-policy select none
preseed tasksel/first multiselect none

# System language
lang en_US

# Language modules to install
langsupport en_US

# System keyboard
keyboard us

# System mouse
mouse

# System timezone
timezone America/New_York

# Root password
rootpw --disabled

# Initial user
user ubuntu --fullname "Ubuntu" --password ubuntu

# Reboot after installation
reboot

# Use text mode install
text

# Install OS instead of upgrade
install

# Use CDROM installation media
cdrom

# System bootloader configuration
bootloader --location=mbr

# Clear the Master Boot Record
zerombr yes

# Partition clearing information
clearpart --all --initlabel

# Disk partitioning information
part / --fstype ext4 --size 1 --grow --asprimary

# System authorization infomation
auth  --useshadow  --enablemd5

# Firewall configuration
firewall --disabled

# Do not configure the X Window System
skipx
```

Generate the custom ISO:

```bash
sudo genisoimage \
-input-charset "utf-8" \
-volid "Ubuntu Server 16.04" \
-eltorito-boot isolinux/isolinux.bin \
-eltorito-catalog isolinux/boot.cat \
-boot-load-size 4 \
-output ~/custom.iso \
-rational-rock \
-cache-inodes \
-joliet \
-full-iso9660-filenames \
-no-emul-boot \
-boot-info-table \
/opt/iso
```
